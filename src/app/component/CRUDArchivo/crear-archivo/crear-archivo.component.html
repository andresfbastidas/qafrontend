<form class="mat-card mat-elevation-z4 p-24 mr-24" fxLayout="column" fxLayoutAlign="start"
fxFlex="1 0 auto" name="form" [formGroup]="form">

<div class="h2 mb-24">Formulario Cargar Archivo</div>



<div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">

 <mat-form-field class="full-width"  appearance="outline" fxFlex="50">
    <mat-label >Asociar archivo a proyecto</mat-label>
    <mat-select  [(ngModel)]="archivoDomain.idProyecto" #proyecto name="proyecto" id="proyecto" formControlName="idProyecto">
       <mat-option *ngFor="let proyecto of listaProyecto" [value]="proyecto.idProyecto">
          {{proyecto.nombreProyecto}}
       </mat-option>
    </mat-select>
    <mat-icon matSuffix class="secondary-text">outlined_flag</mat-icon>
    <mat-error>Estado del proyecto requerido!</mat-error>
</mat-form-field>      
</div>

<div class="contenedor">
    <div class="contenedor_formulario">
      <h1 class="is-size-1">Subir archivos a Cloud Storage</h1>
      <p class="download" *ngIf="finalizado">URL de descarga: <a href="{{ URLPublica }}" target="_blank">Descargar</a></p>
      <form [formGroup]="form" (ngSubmit)="subirArchivo()">
        <div class="file has-name is-boxed">
          <label class="file-label">
            <input class="file-input" type="file" formControlName="archivo" (change)="cambioArchivo($event)">
            <span class="file-cta">
              <span class="file-label">
                Elegir un archivoâ€¦
              </span>
            </span>
            <span class="file-name">
              {{ mensajeArchivo }}
            </span>
          </label>
        </div>
        <hr>
        <progress *ngIf="porcentaje > 0 && porcentaje < 100" class="progress is-large is-success" value="{{porcentaje}}" max="100">{{porcentaje}}%</progress>
        <button [ngClass]="{'button': true, 'is-success': true, 'is-large': true, 'is-loading': porcentaje > 0 && porcentaje < 100}" [disabled]="!form.valid && (porcentaje > 0 && porcentaje < 100)">Subir archivo</button>
      </form>
    </div>
  </div>
<div>
<button mat-raised-button (click)="save()" class="boton" color="accent">Guardar</button>
</div>
</form>

